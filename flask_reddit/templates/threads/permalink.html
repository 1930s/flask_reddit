{% extends "home.html" %}

{% block left %}
<div class="row">
    <a href="{{ thread.link }}"><h2 class="listing-title">{{ thread.title }}</h2></a>
    updated {{ thread.pretty_date('updated') }}, created {{ thread.pretty_date('created') }},
    by <a href="{{ url_for('users.home_page', username=thread.user.username) }}">
        {{ thread.user.username }}.</a>
    <hr>
    <p>{{ thread.text }}</p>
</div>

<div class="row">
    <div class="col-lg-6 thread-comment-section">
        {% if user is defined and user != None %}
        <h5>Submit a comment:</h5>
        <div class="comment-form-parent">
            <textarea class="form-control thread-comment-box" 
                name="comment" placeholder=""></textarea>       
            <button class="btn btn-sm btn-primary submit-comment main-submit">
                    Submit</button>
        </div>
        {% else %}
        <a href="{{ url_for('frontends.login') }}">Login</a> or 
        <a href="{{ url_for('frontends.register') }}">register</a> to comment!
        {% endif %}
    </div>
</div>
<br>
<div class="row comments-tree">
    <h4>Comments section</h4>
    <hr>
    {% for comment in thread.comments.all() %}
    <div class="row comments-element" name="{{ comment.id }}"> 
        <p>{{ comment.text }}</p>
        <br>
        <div class="post-listing-meta">
            by: {{ comment.user.username }} {{ comment.pretty_date() }}
        </div>
        <button class="btn btn-sm btn-primary submit-comment">
                Submit</button>
    </div>
    {% endfor %}
</div>

{% endblock %}



